<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>TimeGuard â€” Settings</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=IBM+Plex+Mono:wght@400;500;600&family=IBM+Plex+Sans:wght@400;500;600&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="options.css">
</head>
<body>
  <div class="container">
    <header>
      <div class="logo">
        <svg width="32" height="32" viewBox="0 0 32 32" fill="none" xmlns="http://www.w3.org/2000/svg">
          <circle cx="16" cy="16" r="14" stroke="currentColor" stroke-width="2"/>
          <path d="M16 8V16L21 21" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
        </svg>
        <h1>TimeGuard</h1>
      </div>
      <p class="subtitle">Configure your mindful browsing settings</p>
    </header>

    <main>
      <!-- Delay Setting -->
      <section class="settings-section">
        <h2>Delay Duration</h2>
        <p class="section-desc">Time to wait before accessing blocked sites</p>
        
        <div class="delay-control">
          <button type="button" class="stepper-btn" id="decreaseDelay" aria-label="Decrease delay">
            <svg width="20" height="20" viewBox="0 0 20 20" fill="none">
              <path d="M5 10H15" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
            </svg>
          </button>
          <div class="delay-display">
            <input type="number" id="delaySeconds" min="1" max="300" value="30">
            <span class="delay-unit">seconds</span>
          </div>
          <button type="button" class="stepper-btn" id="increaseDelay" aria-label="Increase delay">
            <svg width="20" height="20" viewBox="0 0 20 20" fill="none">
              <path d="M10 5V15M5 10H15" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
            </svg>
          </button>
        </div>
        
        <div class="locked-notice" id="delayLockedNotice">
          <svg width="14" height="14" viewBox="0 0 14 14" fill="none">
            <path d="M4.5 6V4.5C4.5 3.12 5.62 2 7 2C8.38 2 9.5 3.12 9.5 4.5V6M3 6H11C11.55 6 12 6.45 12 7V11.5C12 12.05 11.55 12.5 11 12.5H3C2.45 12.5 2 12.05 2 11.5V7C2 6.45 2.45 6 3 6Z" stroke="currentColor" stroke-width="1.2" stroke-linecap="round" stroke-linejoin="round"/>
          </svg>
          <span>Decreasing delay is locked outside your edit window</span>
        </div>
      </section>

      <!-- Blocked Sites -->
      <section class="settings-section">
        <h2>Blocked Sites</h2>
        <p class="section-desc">Sites that will trigger a delay before loading</p>

        <div class="add-site-form">
          <input type="text" id="newSiteInput" placeholder="Enter domain (e.g., reddit.com)" autocomplete="off">
          <button type="button" id="addSiteBtn" class="btn btn-primary">
            <svg width="16" height="16" viewBox="0 0 16 16" fill="none">
              <path d="M8 3V13M3 8H13" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
            </svg>
            Add Site
          </button>
        </div>

        <div class="sites-list" id="sitesList">
          <!-- Sites will be populated here -->
        </div>

        <div class="empty-state" id="emptyState">
          <svg width="48" height="48" viewBox="0 0 48 48" fill="none">
            <circle cx="24" cy="24" r="20" stroke="currentColor" stroke-width="2" stroke-dasharray="4 4"/>
            <path d="M24 16V32M16 24H32" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
          </svg>
          <p>No sites added yet</p>
          <span>Add a domain above to start managing distractions</span>
        </div>
        
        <div class="locked-notice" id="sitesLockedNotice">
          <svg width="14" height="14" viewBox="0 0 14 14" fill="none">
            <path d="M4.5 6V4.5C4.5 3.12 5.62 2 7 2C8.38 2 9.5 3.12 9.5 4.5V6M3 6H11C11.55 6 12 6.45 12 7V11.5C12 12.05 11.55 12.5 11 12.5H3C2.45 12.5 2 12.05 2 11.5V7C2 6.45 2.45 6 3 6Z" stroke="currentColor" stroke-width="1.2" stroke-linecap="round" stroke-linejoin="round"/>
          </svg>
          <span>Editing and deleting sites is locked outside your edit window</span>
        </div>
      </section>

      <!-- Rehab Mode -->
      <section class="settings-section rehab-section">
        <div class="section-header-row">
          <div>
            <h2>Rehab Mode</h2>
            <p class="section-desc">Lock settings outside a specific time window</p>
          </div>
          <label class="toggle-switch">
            <input type="checkbox" id="rehabModeEnabled">
            <span class="toggle-slider"></span>
          </label>
        </div>
        
        <div class="rehab-settings" id="rehabSettings">
          <p class="rehab-explanation">
            When enabled, you can only edit or delete sites, decrease the delay, or modify these settings during your specified time window.
          </p>
          
          <div class="time-window-control">
            <div class="time-input-group">
              <label for="rehabStartTime">Edit window starts</label>
              <input type="time" style="width:150px; margin-left: -10px;" id="rehabStartTime" value="23:00">
            </div>
            <div class="time-separator">
              <svg width="20" height="20" viewBox="0 0 20 20" fill="none">
                <path d="M6 10H14M14 10L10 6M14 10L10 14" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
              </svg>
            </div>
            <div class="time-input-group">
              <label for="rehabEndTime">Edit window ends</label>
              <input type="time" style="width:150px; margin-left: -10px;" id="rehabEndTime" value="00:00">
            </div>
          </div>
          
          <div class="current-status" id="rehabStatus">
            <!-- Status will be populated here -->
          </div>
        </div>
        
        <div class="locked-notice" id="rehabLockedNotice">
          <svg width="14" height="14" viewBox="0 0 14 14" fill="none">
            <path d="M4.5 6V4.5C4.5 3.12 5.62 2 7 2C8.38 2 9.5 3.12 9.5 4.5V6M3 6H11C11.55 6 12 6.45 12 7V11.5C12 12.05 11.55 12.5 11 12.5H3C2.45 12.5 2 12.05 2 11.5V7C2 6.45 2.45 6 3 6Z" stroke="currentColor" stroke-width="1.2" stroke-linecap="round" stroke-linejoin="round"/>
          </svg>
          <span>Rehab Mode settings are locked outside your edit window</span>
        </div>
      </section>
    </main>

    <footer>
      <div class="footer-actions">
        <button type="button" id="cancelBtn" class="btn btn-secondary">Cancel</button>
        <button type="button" id="saveBtn" class="btn btn-primary">Save Settings</button>
      </div>
      <div class="save-status" id="saveStatus"></div>
    </footer>
  </div>

  <!-- Edit Modal -->
  <div class="modal-overlay" id="editModal">
    <div class="modal">
      <h3>Edit Site</h3>
      <input type="text" id="editSiteInput" placeholder="Enter domain">
      <div class="modal-actions">
        <button type="button" id="cancelEditBtn" class="btn btn-secondary">Cancel</button>
        <button type="button" id="saveEditBtn" class="btn btn-primary">Save</button>
      </div>
    </div>
  </div>

  <!-- Rehab Mode Warning Modal -->
  <div class="modal-overlay" id="rehabWarningModal">
    <div class="modal warning-modal">
      <div class="warning-icon">
        <svg width="32" height="32" viewBox="0 0 32 32" fill="none">
          <path d="M16 12V18M16 22H16.01M14.27 5.73L3.27 24.73C2.92 25.35 2.75 25.66 2.77 25.91C2.79 26.14 2.9 26.35 3.08 26.49C3.28 26.66 3.64 26.66 4.36 26.66H27.64C28.36 26.66 28.72 26.66 28.92 26.49C29.1 26.35 29.21 26.14 29.23 25.91C29.25 25.66 29.08 25.35 28.73 24.73L17.73 5.73C17.38 5.11 17.2 4.8 16.97 4.69C16.77 4.6 16.53 4.6 16.33 4.69C16.1 4.8 15.92 5.11 15.57 5.73L14.27 5.73Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
        </svg>
      </div>
      <h3>Enable Rehab Mode?</h3>
      <p>Once enabled and saved, you will <strong>only</strong> be able to make the following changes during your specified time window:</p>
      <ul>
        <li>Edit or delete blocked sites</li>
        <li>Decrease the delay duration</li>
        <li>Modify or disable Rehab Mode</li>
      </ul>
      <p class="warning-note">You can always add new sites and increase the delay at any time.</p>
      <div class="modal-actions">
        <button type="button" id="cancelRehabBtn" class="btn btn-secondary">Cancel</button>
        <button type="button" id="confirmRehabBtn" class="btn btn-warning">Enable Rehab Mode</button>
      </div>
    </div>
  </div>

  <script src="options.js"></script>
</body>
</html>
